if (self.CavalryLogger) { CavalryLogger.start_js(["i8SAh"]); }

__d("ChatEmojiCategoryPickerReact.bs",["cx","Keys","bs_array","bs_curry","React","ReasonReact.bs","EmojiLikeConstants","MessengerSupportedEmojiUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){return String.fromCodePoint.apply(String,a)},i=b("ReasonReact.bs").statelessComponent("ChatEmojiCategoryPickerReact");function j(a,c,d,e){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){__p&&__p();return b("React").createElement("div",{className:"_1uwv"},b("bs_array").map(function(a){__p&&__p();var e=b("MessengerSupportedEmojiUtils").getNewEmojiData(b("bs_curry")._1(h,a.icon),b("EmojiLikeConstants").size.XSMALL);if(e==null)return null;else return b("React").cloneElement(b("React").createElement("div",{key:a.name,className:(a.name===c?"_1uwz":"")+" _1uwx",role:"presentation",tabIndex:0,onKeyDown:function(c){if(c.keyCode===b("Keys").RETURN){c.preventDefault();return b("bs_curry")._1(d,a)}else return 0},onClick:function(){return b("bs_curry")._1(d,a)}},e.emoji),{"data-hover":"tooltip","data-tooltip-content":a.name})},a))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.categories,a.currentCategoryName,a.onSelect,[])});f.fromCodePoint=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("ChatEmojiFlyout.react",["cx","Bootloader","ChatEmojiCategories","ChatEmojiCategoryPickerReact.bs","ChatEmojiPicker.react","ChatFlyoutPlaceholder.react","EmojiActions","EmojiDispatcher","EmojiState","EmojiStateStore","Keys","MessengerSupportedEmojiUtils","React","SkinToneEmoji.bs","StoreAndPropBasedStateMixin","emptyFunction","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ChatEmojiCategoryPickerReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatEmojiFlyout",mixins:[b("StoreAndPropBasedStateMixin")(b("EmojiStateStore"))],statics:{calculateState:function(a){a=b("EmojiStateStore").getState();var c=a.currentCategory?a.currentCategory:b("ChatEmojiCategories").categories[0];return{currentCategory:c,dataReady:a.trayDataReady,emojiColorPref:a.emojiColor,mruCategory:a.mruCategory}}},propTypes:{onEscKeyDown:a.func,onCategorySelect:a.func,onSelect:a.func.isRequired,sendCustomEmoji:a.func,threadID:a.string,isFromReactionMenu:a.bool},getDefaultProps:function(){return{isFromReactionMenu:!1}},_markerPoint:function(a){var c=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.COMPOSER_INTERACTION,a,"",0,c)},"ChatEmojiFlyout.react")},componentDidMount:function(){this._markerPoint("mount_emoji_flyout"),this._onShown(),b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]),this.state.emojiColorPref===void 0&&b("EmojiActions").getEmojiColor()},render:function(){__p&&__p();if(!this.state.dataReady||this.state.emojiColorPref===void 0)return b("React").createElement(b("ChatFlyoutPlaceholder.react"),null);this._markerPoint("load_emoji");this._markerPoint=b("emptyFunction");var a=this.state.mruCategory&&!this.props.isFromReactionMenu?this.state.mruCategory.concat(b("ChatEmojiCategories").categories):b("ChatEmojiCategories").categories,c=this.state.emojiColorPref;(!c||c<0)&&(c=0);var d=this.props.isFromReactionMenu&&this.state.mruCategory&&this.state.mruCategory.length===1&&this.state.mruCategory[0]===this.state.currentCategory?b("ChatEmojiCategories").categories[0]:this.state.currentCategory,e=d.emojis.map(function(a){a=a;c!=0&&b("SkinToneEmoji.bs").hasVariations(a)&&(a=b("SkinToneEmoji.bs").applyTone(a,c));var d=String.fromCodePoint.apply(String,a);return!b("MessengerSupportedEmojiUtils").isSupportedEmoji(d)?null:a}).filter(Boolean);return b("React").createElement("div",{className:"_4pi8",onKeyDown:this._handleKeyDown},b("React").createElement(b("ChatEmojiPicker.react"),{className:"_4pia",columns:6,emojiChoices:e,onSelect:this.props.onSelect,ref:"picker",sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:!!(this.state.emojiColorPref&&this.state.emojiColorPref<0),threadID:this.props.threadID,useSkinToneSelector:!0}),b("React").createElement(h,{categories:a,currentCategoryName:d.name,onSelect:this._handleSelectCategory}))},_onShown:function(){this.state.dataReady||this._loadTrayData()},_loadTrayData:function(){b("EmojiState").onTrayDataReady(function(){})},_handleChooseEmojiColor:function(a){b("EmojiActions").changeEmojiColor(a)},_handleKeyDown:function(a){a.keyCode===b("Keys").ESC&&this.props.onEscKeyDown&&this.props.onEscKeyDown()},_handleSelectCategory:function(a){b("EmojiActions").changeCurrentCategory(a),this.refs.picker.scrollToTop(),this.props.onCategorySelect&&this.props.onCategorySelect()}});e.exports=c}),null);