if (self.CavalryLogger) { CavalryLogger.start_js(["EVAhS"]); }

__d("ComposedEntityMutabilityToName",[],(function(a,b,c,d,e,f){e.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function(a,b,c,d,e,f){e.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT",13:"TEMPLATE_VARIABLE",14:"ASSISTANT_TYPEAHEAD"}}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function a(a){this.$1=a}a.prototype.callabilityFetched=function(a,b){this.$1.dispatch({type:g.CALLABILITY_FETCHED,userID:a,callability:b})};a.prototype.callabilityFetchError=function(a){this.$1.dispatch({type:g.CALLABILITY_FETCH_ERROR,userID:a})};a.Types=g;e.exports=a}),null);
__d("XRTCCallabilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:!0}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=new(b("FBRTCCallabilityActions"))(a)}a.prototype.fetchCallability=function(a){b("TimeSlice").guard(function(){var c=b("XRTCCallabilityController").getURIBuilder().setFBID("user_id",a).getURI(),d=this.$2.bind(this,a),e=this.$3.bind(this,a);new(b("AsyncRequest"))().setURI(c).setHandler(d).setErrorHandler(e).setAllowCrossPageTransition(!0).send()}.bind(this),"Chat Tab RTC Callability Check",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.$2=function(a,b){this.$1.callabilityFetched(a,b.payload)};a.prototype.$3=function(a,b){this.$1.callabilityFetchError(a)};e.exports=a}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCCallabilityActions","FBRTCCallabilityDataManager","FluxStore","MercuryThreadInfo"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=.5,j=5;c=babelHelpers.inherits(a,b("FluxStore"));h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$RTCCallabilityStore2=new(b("FBRTCCallabilityDataManager"))(a),this.$RTCCallabilityStore1=new(b("Cache"))()}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type;switch(c){case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:c=a.userID;var d=a.callability;this.$RTCCallabilityStore1.set(c,{callable:d.is_callable,isBlocked:d.is_blocked},null,d.is_callable?j:i);this.__emitChange();break;case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(a.userID,{callable:!1,isBlocked:!1},null,i);this.__emitChange();break}};a.prototype.isCallable=function(a,b){b=b?b.message_count>0&&b.folder==="inbox":!1;a=this.fetchUserFromCache(a);return a&&a.callable||b};a.prototype.isBlocked=function(a,c){c=c?b("MercuryThreadInfo").canReply(c):!0;a=this.fetchUserFromCache(a);return a&&a.isBlocked||!c};a.prototype.fetchUserFromCache=function(a){this.$RTCCallabilityStore1.has(a)||(this.$RTCCallabilityStore2.fetchCallability(a),this.$RTCCallabilityStore1.set(a,{callable:!1,isBlocked:!1},null,i));return this.$RTCCallabilityStore1.get(a)};a.prototype.callButtonTooltip=function(a,b,c,d){c===void 0&&(c=!0);return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a video chat with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for video calling",[g._param("shortname",b)])};a.prototype.voiceCallButtonTooltip=function(a,b,c,d){c===void 0&&(c=!0);return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a voice call with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for voice calling",[g._param("shortname",b)])};a.__moduleID=e.id;e.exports=a}),null);
__d("MessagingThreadEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessagingThreadEventLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setActiveTimeMs=function(a){this.$1.active_time_ms=a;return this};a.prototype.setClientEventTimeMs=function(a){this.$1.client_event_time_ms=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setPageData=function(a){this.$1.page_data=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setScriptPath=function(a){this.$1.script_path=a;return this};a.prototype.setSource=function(a){this.$1.source=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={active_time_ms:!0,client_event_time_ms:!0,event:!0,page_data:!0,page_id:!0,script_path:!0,source:!0,thread_id:!0,vc:!0};e.exports=a}),null);
__d("ComposedEntityMutability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerConstants",[],(function(a,b,c,d,e,f){"use strict";a={NEW_THREAD_KEY:"new",BROWSER_EXTENSIONS_DIALOG_DIMENSIONS:{HEIGHT:604,WIDTH:405}};e.exports=a}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","FBLogger","LogHistory","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ComposedEntityMutability").IMMUTABLE,h=b("LogHistory").getInstance("messenger_editor_state_manager"),i=new(b("CacheStorage"))("localstorage"),j=new(b("CacheStorage"))("memory"),k=!1,l;a={get:function(a){__p&&__p();if(!a)return this._getEmptyEditorState();if(a===b("MessengerConstants").NEW_THREAD_KEY)return l||this._getEmptyEditorState();var c=i.get(a,!1);k&&(c?(j.set(a,c),i.remove(a)):c=j.get(a,!1));if(!c)return this._getEmptyEditorState();a=c.encodedBlocks;var d=b("mapObject")(a.entityMap,function(a,c){return new(b("DraftEntityInstance"))({type:b("ComposedEntityTypeToName")[a.type],mutability:b("ComposedEntityMutabilityToName")[g],data:a.data})});a=b("decodeBlocks")(a.blocks,d);d=b("EditorState").createWithContent(a);return b("EditorState").acceptSelection(d,new(b("SelectionState"))(c.selection))},set:function(a,c){if(a===b("MessengerConstants").NEW_THREAD_KEY){l=c;return}var d=b("encodeBlocks")(c.getCurrentContent());c=c.getSelection();var e=c.toJS(),f=k?j:i;f=f.set(a,{encodedBlocks:d,selection:e});f||(this._logWriteError(a),this._switchToMemoryStore(a,d,c))},_logWriteError:function(a){var c=i.getLastSetExceptionMessage(),d=i.getStorageKeyCount();b("FBLogger")("messenger_dot_com").warn("Fail to write to MessengerEditorState %s  %s",c,d);h.debug("set_editor_state_fail",JSON.stringify({threadID:a,error:c,keysCount:d}))},_switchToMemoryStore:function(a,c,d){if(!k){b("FBLogger")("messenger_dot_com").warn("Switching to MemoryStorage");h.debug("Switching to memoryStorage");k=!0;d=d.toJS();j.set(a,{encodedBlocks:c,selection:d})}},_getEmptyEditorState:function(){var a=b("EditorState").createEmpty();return b("EditorState").forceSelection(a,a.getSelection())}};e.exports=a}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus","WorkChatAvailabilityStatusLoader","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=null,f=!1;if(b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("CurrentUser").isWorkUser()&&b("gkx")("678573")){var h=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();e={isDoNotDisturb:h.getIsDoNotDisturb(a.fbid),description:h.getDescriptionWithUserName(a.short_name,a.fbid)};f=e.isDoNotDisturb}h=b("PresenceStatus").get(a.fbid);var i,j;h!==b("AvailableListConstants").ACTIVE&&(i=b("LastActiveTimes").get(a.fbid),j=b("LastActiveTimes").getShortDisplay(a.fbid));h=h===b("AvailableListConstants").ACTIVE&&!f;d={contact:a,platform:c,isUserActive:h,availabilityStatusData:e,lastActiveTS:f?null:i,lastActive:f?null:j}}}return d}};e.exports=a}),null);
__d("MessagingThreadEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"})}),null);
__d("MessagingThreadSourceName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_NUB:"chat_nub",MESSENGER:"messenger"})}),null);
__d("MessengerLoggerUtils",["MercuryIDs","MessagingThreadEventType","MessagingThreadEventTypedLogger","MessagingThreadSourceName","ScriptPath","pageID"],(function(a,b,c,d,e,f){a={logThreadChangeEvent:function(a,c,d,e){d.activeThreadID&&a&&this.log({activeThreadID:d.activeThreadID,event:b("MessagingThreadEventType").INACTIVE,clientEventTimeMs:c,activeTimeMs:c-a}),e.activeThreadID&&this.log({activeThreadID:e.activeThreadID,event:b("MessagingThreadEventType").ACTIVE,clientEventTimeMs:c,activeTimeMs:0})},log:function(a){var c=b("MercuryIDs").tokenize(a.activeThreadID.toString()),d=b("ScriptPath").getPageInfo();new(b("MessagingThreadEventTypedLogger"))().setEvent(a.event).setClientEventTimeMs(a.clientEventTimeMs).setActiveTimeMs(a.activeTimeMs).setPageID(b("pageID")).setPageData(d?d.extraData:{}).setThreadID(c.value).setSource(b("MessagingThreadSourceName").MESSENGER).log()}};e.exports=a}),null);
__d("MessengerURIStore",["MessengerActions","MessengerLoggerUtils","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerURIStore1={activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null},this.$MessengerURIStore2=babelHelpers["extends"]({},this.$MessengerURIStore1),this.$MessengerURIStore4=this.$MessengerURIStore3=null}a.prototype.getState=function(){return this.$MessengerURIStore1};a.prototype.getPrevState=function(){return this.$MessengerURIStore2};a.prototype.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:this.$MessengerURIStore2=this.$MessengerURIStore1;this.$MessengerURIStore4=this.$MessengerURIStore3;this.$MessengerURIStore1=babelHelpers["extends"]({activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null,threadsIDs:null},a.nextState);a=Date.now();this.$MessengerURIStore3=a;b("MessengerLoggerUtils").logThreadChangeEvent(this.$MessengerURIStore4,a,this.$MessengerURIStore2,this.$MessengerURIStore1);this.emitChange();break}};e.exports=new a()}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})}};e.exports=a}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerRadioButtonReact.bs",["cx","React","bs_js_primitive","XUIRadioInput.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c={checked:a.checked,className:"__rm",disabled:a.disabled,name:a.name,onChange:a.onChange,value:a.value};a=b("bs_js_primitive").undefined_to_opt(a.id);a!==void 0&&(c.id=b("bs_js_primitive").valFromOption(a));return b("React").createElement(b("XUIRadioInput.react"),c)}f.make=a}),null);
__d("MessengerRadioList.react",["invariant","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","MessengerRadioButtonReact.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){a.target instanceof HTMLInputElement||g(0,761),this.props.onSelect&&this.props.onSelect(this.props.value)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("li",{className:this.props.className},b("React").createElement(b("InputLabel_DEPRECATED.react"),{display:"inline"},b("React").createElement(b("MessengerRadioButtonReact.bs").make,{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$1,value:this.props.value}),b("React").createElement(b("InputLabelLabel_DEPRECATED.react"),null,this.props.children)))};a.propTypes={disabled:d.bool,name:d.string,onSelect:d.func,selectedValue:d.any,value:d.any};i=babelHelpers.inherits(c,b("React").Component);i&&i.prototype;c.prototype.render=function(){var a=b("React").Children.map(this.props.children,function(a){return b("React").cloneElement(a,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue})},this);return b("React").createElement("ul",babelHelpers["extends"]({},this.props,{name:null}),a)};function c(){i.apply(this,arguments)}c.propTypes={name:d.string,onValueChange:d.func,selectedValue:d.any};c.Item=a;e.exports=c}),null);
__d("MessengerAddIconSVGReact.bs",["fbt","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("add to group"),i=b("ReasonReact.bs").statelessComponent("MessengerAddIconSVGReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"-8 -8 48 48"},b("React").createElement("title",void 0,h),b("React").createElement("path",{clipRule:"evenodd",d:"M16,0 V32 M0,16 H32",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.className,a.customColor,[])});f.addToGroup=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerHotLikeSVGReact.bs",["cx","fbt","cssVar","React","uniqueID","bs_belt_Option","CurrentUser","ReasonReact.bs","joinClasses","MessengerEnvironment"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").reducerComponent("MessengerHotLikeSVGReact"),k="transparent",l=h._("Thumbs-up sign");function a(a,c,d){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(d){var e,f=0;!(c==null)&&c!==""?e=c:f=1;f===1&&(e=b("CurrentUser").isWorkUser()?"#373e4c":b("MessengerEnvironment").messengerui?"#0084ff":"#4080ff");return b("React").createElement("div",{className:b("joinClasses")(b("bs_belt_Option").getWithDefault(a,""),"_1i1j")},b("React").createElement("svg",{"aria-labelledby":d[1][0],role:"img",height:"100%",width:"100%",version:"1.1",viewBox:"0 0 256 256",x:"0px",y:"0px"},b("React").createElement("title",{id:d[1][0]},l),b("React").createElement("g",void 0,b("React").createElement("g",void 0,b("React").createElement("polyline",{fill:k,points:"256,0 258,256 2,258 "}),b("React").createElement("path",{d:"M254,147.1c0-12.7-4.4-16.4-9-20.1c2.6-4.2,5.1-10.2,5.1-18c0-15.8-12.3-25.7-32-25.7h-52c-0.5,0-1-0.5-0.9-1\n                 c1.4-8.6,3-24,3-31.7c0-16.7-4-37.5-19.3-45.7c-4.5-2.4-8.3-3.7-14.1-3.7c-8.8,0-14.6,3.6-16.7,5.9c-1.3,1.4-1.9,3.3-1.8,5.2\n                 l1.3,34.6c0.2,2.8-0.3,5.4-1.6,7.7l-24,47.8c-1.7,3.5-4.2,6.6-7.6,8.5c-3.5,2-6.5,5.9-6.5,9.5v94.8C78,230,94,238,112.3,238h86.1\n                 c13.5,0,22.4-4.5,27.2-13.5c4.4-8.2,3.2-15.8,1.4-21.5c7.4-2.3,14.8-8,16.9-18.3c1.3-6.6-0.7-12.1-2.9-16.2\n                 C247.5,165,254,159.8,254,147.1z",fill:e,stroke:k,strokeLinecap:"round",strokeWidth:"5%"}),b("React").createElement("path",{d:"M56.2,100H13.8C7.3,100,2,105.3,2,111.8v128.5c0,6.5,5.3,11.8,11.8,11.8h42.4c6.5,0,11.8-5.3,11.8-11.8V111.8\n                 C68,105.3,62.7,100,56.2,100z",fill:e})))))},function(){return[b("uniqueID")()]},j[10],function(a,b){return 0},j[12]]}f.component=j;f.cTRANSPARENT=k;f.label=l;f.make=a}),null);
__d("MessengerHotLikeSVGReact.re",["bs_curry","MessengerHotLikeSVGReact.bs","React.bs"],(function(a,b,c,d,e,f){a=b("React.bs").wrapReasonForJs(b("MessengerHotLikeSVGReact.bs").component,function(a){return b("bs_curry")._3(b("MessengerHotLikeSVGReact.bs").make,a.className,a.color,a.children)});f.component=a;f["default"]=a}),null);
__d("messengerRTLClasses",["cx","isRTL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){a=b("isRTL")(a||"");return c?a?"_4pv0":"":(a?"":"direction_ltr")+(a?" direction_rtl":"")+(a?"":" text_align_ltr")+(a?" text_align_rtl":"")+(a?" _4pv0":"")}e.exports=a}),null);
__d("MessengerComposerState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({step:null,recipients:b("immutable").List()});a.__TCmeta={type:"MessengerComposerState"};e.exports=a}),null);
__d("MessengerComposerSteps",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=a}),null);
__d("MessengerComposerStore",["EditorState","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerStore","MessengerURIStore","MessengerView","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("MessengerComposerState"))({step:b("MessengerComposerSteps").NULL,recipients:b("immutable").List()});c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerComposerStore1=h}a.prototype.getState=function(){return this.$MessengerComposerStore1};a.prototype.__onDispatch=function(a){__p&&__p();b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState().detailView,d=this.$MessengerComposerStore1.recipients,e=this.$MessengerComposerStore1.step,f=null,g=null;switch(a.type){case b("MessengerComposerActions").Types.ADD_TOKEN:if(d.some(function(b){return b.getUniqueID()===a.entry.getUniqueID()}))break;f=d.push(a.entry);break;case b("MessengerComposerActions").Types.REMOVE_TOKEN:var h=a.entry.getUniqueID(),i=d.findIndex(function(a){return a.getUniqueID()===h});i!==-1&&(f=d["delete"](i));break;case b("MessengerComposerActions").Types.FOCUS_COMPOSER:e===b("MessengerComposerSteps").SELECT_RECIPIENTS&&(g=b("MessengerComposerSteps").COMPOSE);break;case b("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:e===b("MessengerComposerSteps").COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerActions").Types.REPLACE_STATE:i=b("MessengerURIStore").getPrevState().detailView;i!==b("MessengerView").DETAIL.COMPOSE&&c===b("MessengerView").DETAIL.COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerComposerActions").Types.MOVE_DRAFT:b("MessengerEditorStateManager").set(a.threadID,b("MessengerEditorStateManager").get(b("MessengerConstants").NEW_THREAD_KEY));break;case b("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var j=b("EditorState").createEmpty();setTimeout(function(){b("MessengerEditorStateManager").set(b("MessengerConstants").NEW_THREAD_KEY,b("EditorState").forceSelection(j,j.getSelection()))},0);g=b("MessengerComposerSteps").NULL;f=b("immutable").List();break}(f||g)&&(this.$MessengerComposerStore1=new(b("MessengerComposerState"))({step:g||e,recipients:f||d}),this.emitChange())};e.exports=new a()}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("CacheStorage"))("localstorage"),i="desktopNotifsEnabled";c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:this.$MessengerSettingsStore2()})}a.prototype.getSettings=function(){return this.$MessengerSettingsStore1};a.prototype.$MessengerSettingsStore2=function(){return h.get(i,!1)};a.prototype.$MessengerSettingsStore3=function(a){h.set(i,a)};a.prototype.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};e.exports=new a()}),null);
__d("MessengerRTCUnsupportedBrowserDialog.react",["cx","fbt","CurrentUser","FBRTCConfig","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","React","XWorkplaceMarketingDefaultController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(k,null,h._("Switch browsers to make calls")),b("React").createElement(j,null,this.$1(c,d)),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{className:"_30vt",label:h._("Learn More"),onClick:a,type:"secondary",href:b("FBRTCConfig").unsupportedBrowserUrl(),target:"_blank"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("OK"),onClick:a,type:"primary"})))};a.prototype.$1=function(a,c){if(b("CurrentUser").isWorkUser())return h._({"video calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Workplace Chat in {link to install chrome}, {link to install firefox} or the {link to install Workplace chat desktop} app.","calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Workplace Chat in {link to install chrome}, {link to install firefox} or the {link to install Workplace chat desktop} app."},[h._param("browser name, i.e. Internet Explorer or Safari",a),h._enum(c?"video calling":"calling",{"video calling":"video calling",calling:"calling"}),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3()),h._param("link to install Workplace chat desktop",this.$4())]);else return h._({"video calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}.","calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}."},[h._param("browser name, i.e. Internet Explorer or Safari",a),h._enum(c?"video calling":"calling",{"video calling":"video calling",calling:"calling"}),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())])};a.prototype.$2=function(){return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome")};a.prototype.$3=function(){return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.mozilla.org/en-US/firefox/new/",target:"_blank"},"Mozilla Firefox")};a.prototype.$4=function(){var a=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","rtc_unsupported_dialog").getURI();return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:a,target:"_blank"},"Workplace Chat")};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialog.react",["fbt","CurrentUser","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","React","XWorkplaceMarketingDefaultController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").component;a=function(a){var c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(i,null,j(d)),b("React").createElement(h,null,k(c,d,a)),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:g._("OK"),onClick:a,type:"primary"})))};function j(a){return a?g._("Switch browsers to start group video chats"):g._("Switch browsers to make group calls")}function k(a,c,d){return b("CurrentUser").isWorkUser()?g._({"video call":"Unfortunately, our Workplace Chat group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video call, open in {link to install chrome} or the {link to install Workplace chat desktop} app.","call":"Unfortunately, our Workplace Chat group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome} or the {link to install Workplace chat desktop} app."},[g._param("browser name, i.e. Internet Explorer or Safari",a),g._enum(c?"video call":"call",{"video call":"video call",call:"call"}),g._param("link to install chrome",l(d)),g._param("link to install Workplace chat desktop",m(d))]):g._({"video call":"Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video call, open in {link to install chrome}.","call":"Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome}."},[g._param("browser name, i.e. Internet Explorer or Safari",a),g._enum(c?"video call":"call",{"video call":"video call",call:"call"}),g._param("link to install chrome",l(d))])}function l(a){return b("React").createElement(b("Link.react"),{onClick:a,href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome")}function m(a){var c=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","rtc_unsupported_dialog").getURI();return b("React").createElement(b("Link.react"),{onClick:a,href:c,target:"_blank"},"Workplace Chat")}e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialogController",["fbt","MessengerDialogs.bs","MessengerRTCGroupCallUnsupportedBrowserDialog.react","MessengerRTCUnsupportedBrowserDialog.react","React","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={_dialog:null,_handleToggle:function(a){a||b("MessengerDialogs.bs").removeAllDialogs()},hideDialog:function(){b("MessengerDialogs.bs").removeAllDialogs()},_browserName:function(){if(b("UserAgent").isBrowser("Firefox"))return g._("Firefox");else if(b("UserAgent").isBrowser("IE"))return g._("Internet Explorer");else if(b("UserAgent").isBrowser("Safari"))return g._("Safari");else return g._("your browser")},render:function(a){var c=a.hasVideo,d=a.isGroupCall;b("MessengerDialogs.bs").showDialog(function(){return d?b("React").createElement(b("MessengerRTCGroupCallUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:c,hideDialog:this.hideDialog,onUnmount:this._handleToggle}):b("React").createElement(b("MessengerRTCUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:c,hideDialog:this.hideDialog,onUnmount:this._handleToggle})}.bind(this))},dismiss:b("MessengerDialogs.bs").removeAllDialogs};e.exports=a}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("MessengerDispatcher"))}),null);
__d("MessengerSortParticipants",["immutable"],(function(a,b,c,d,e,f){a={sortAlphabeticalWithAdmins:function(a,b){var c=b.filter(function(b){return!!b&&a&&a.indexOf(b.fbid)!==-1}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});b=b.filter(function(b){return!!b&&(!a||a.indexOf(b.fbid)===-1)}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});return c.concat(b)}};e.exports=a}),null);
__d("Sticker.react",["cx","fbt","Arbiter","MessengerHotLikeSVGReact.re","PaddedStickerConfig","React","ReactDOM","StickerConstants","clearInterval","emptyFunction","getElementPosition","getObjectValues","joinClasses","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerHotLikeSVGReact.re").component;a=b("React").PropTypes;var j=83,k=5e3,l=10,m={CLICK:"click",HOVER:"hover",LOAD_AND_HOVER:"load_and_hover",ANIMATE_FOREVER:"animate_forever"};c=b("React").createClass({displayName:"Sticker",propTypes:{accessibilityLabel:a.string,animationTime:a.number,animationTrigger:a.oneOf(b("getObjectValues")(m)),forceCursorPointer:a.bool,frameCount:a.number.isRequired,frameRate:a.number,framesPerCol:a.number.isRequired,framesPerRow:a.number.isRequired,onAttachmentLoad:a.func,onStickerClick:a.func,packID:a.string,packName:a.string,sourceURI:a.string.isRequired,sourceWidth:a.number.isRequired,sourceHeight:a.number.isRequired,spriteURI:a.string,stickerID:a.string,subscribedThreadID:a.string,testID:a.string},getInitialState:function(){return{index:0,hasAnimated:!1,unsubscribeID:null}},getDefaultProps:function(){return{animationTime:k,accessibilityLabel:"",forceCursorPointer:!1,frameRate:j,onStickerClick:b("emptyFunction"),packID:null,packName:""}},componentDidMount:function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._stopIntervalID=0;(this.props.animationTrigger===m.LOAD_AND_HOVER||this.props.animationTrigger===m.ANIMATE_FOREVER)&&this.props.frameCount>1&&this.props.spriteURI&&this.startAnimation();if(this.props.subscribedThreadID&&this.props.frameCount>1){var a=b("Arbiter").subscribe(this.props.subscribedThreadID,function(a,b){this.isScrolledIntoView(b.scrollTop,b.viewHeight,b.top)}.bind(this));this.setState({unsubscribeID:a})}},componentWillUnmount:function(){this.state.unsubscribeID&&b("Arbiter").unsubscribe(this.state.unsubscribeID),this.isAnimating()&&b("clearInterval")(this._stopIntervalID)},isAnimating:function(){return!!this._stopIntervalID},getWidth:function(){return Math.floor(this.props.sourceWidth)},getHeight:function(){return Math.floor(this.props.sourceHeight)},preloadSprite:function(){var a=new window.Image();a.onload=function(){this.isMounted()&&!this.state.hasAnimated&&(this.setState({hasAnimated:!0}),this._stopIntervalID=b("setIntervalAcrossTransitions")(this.incrementFrameIndex,this.props.frameRate))}.bind(this);b("PaddedStickerConfig").ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI?a.src=this.props.paddedSpriteURI:a.src=this.props.spriteURI},isScrolledIntoView:function(a,c,d){var e=b("getElementPosition")(b("ReactDOM").findDOMNode(this));d=a+e.y-d;c=a+c;e=d+e.height;this.props.frameCount>1&&!this.state.hasAnimated&&e-l<=c&&d+l>=a&&this.startAnimation()},startAnimation:function(){!this.state.hasAnimated&&this.props.spriteURI?this.preloadSprite():this.isAnimating()||(this.setState({hasAnimated:!0}),this._stopIntervalID=b("setIntervalAcrossTransitions")(this.incrementFrameIndex,this.props.frameRate))},stopAnimation:function(){this.setState({index:0}),b("clearInterval")(this._stopIntervalID),this._stopIntervalID=0},toggleAnimation:function(){this.isAnimating()?this.stopAnimation():this.startAnimation()},shouldStopAnimating:function(){var a=this.state.index%this.props.frameCount;if(this.props.animationTrigger===m.ANIMATE_FOREVER)return!1;if(!(a===0&&this.state.index*this.props.frameRate>this.props.animationTime))return!1;return this.props.animationTrigger===m.CLICK?!0:!this.state.isHovered},incrementFrameIndex:function(){this.shouldStopAnimating()?this.stopAnimation():this.setState({index:this.state.index+1})},getStyle:function(){__p&&__p();var a=0,c=this.props.spriteURI;if(b("PaddedStickerConfig").ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){c=this.props.paddedSpriteURI;var d=240/Math.min(this.getHeight(),this.getWidth());a=Math.floor(b("StickerConstants").SPRITE_PADDING/d)}d=this.state.index%this.props.frameCount;var e=d%this.props.framesPerRow*(this.getWidth()+a*2)+a;d=Math.floor(d/this.props.framesPerRow)*(this.getHeight()+a*2)+a;var f=this.props.frameCount>1&&this.props.animationTrigger===m.CLICK||this._isStickerClickable(this.props.packID);f=this.props.forceCursorPointer||f?"pointer":"default";if(!this.state.hasAnimated||!this.props.spriteURI)return{backgroundImage:this._isHotLike()?null:"url("+this.props.sourceURI+")",backgroundRepeat:"no-repeat",backgroundSize:this.getWidth()+"px "+this.getHeight()+"px",cursor:f,height:this.getHeight(),width:this.getWidth()};else return{backgroundImage:"url("+c+")",backgroundPosition:-e+"px "+-d+"px",backgroundSize:(this.getWidth()+a*2)*this.props.framesPerRow+"px "+(this.getHeight()+a*2)*this.props.framesPerCol+"px",cursor:f,height:this.getHeight(),width:this.getWidth(),imageRendering:"-webkit-optimize-contrast"}},_isStickerClickable:function(a){return a&&a!=b("StickerConstants").MOBILE_LIKE_STICKER_PACK_ID&&a!=b("StickerConstants").GRAVEYARD_PACK_ID},onStickerClick:function(){if(!this._isStickerClickable(this.props.packID))return;this.props.onStickerClick&&this.props.onStickerClick(this.props.packID,this.props.stickerID)},mouseLeft:function(){this.setState({isHovered:!1})},mouseEntered:function(){this.setState({isHovered:!0}),this.isAnimating()||this.startAnimation()},tabFocusSelected:function(){this.setState({isHovered:!0}),this.isAnimating()||this.startAnimation()},tabFocusUnselected:function(){this.setState({isHovered:!1})},getAriaLabel:function(){return h._("{pack name} {sticker name} sticker",[h._param("pack name",this.props.packName),h._param("sticker name",this.props.accessibilityLabel)])},render:function(){var a,c;this.props.animationTrigger===m.CLICK&&this.props.frameCount>1&&this.props.spriteURI?a=!0:(this.props.animationTrigger===m.HOVER||this.props.animationTrigger===m.LOAD_AND_HOVER)&&this.props.frameCount>1&&this.props.spriteURI&&(c=!0);var d=a?this.toggleAnimation:null;this.props.packID&&(d=this.onStickerClick);var e=this.props.className,f=null;this._isHotLike()&&(e=b("joinClasses")(e,"_576q"),f=b("React").createElement(i,{color:this.props.customColor}));return b("React").createElement("div",{"aria-label":this.getAriaLabel(),className:e,"data-testid":this.props.testID,onBlur:this.tabFocusUnselected,onClick:d,onFocus:this.tabFocusSelected,onMouseEnter:c?this.mouseEntered:null,onMouseLeave:c?this.mouseLeft:null,role:"img",style:this.getStyle(),tabIndex:"0"},f)},_isHotLike:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?this.props.stickerID===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||this.props.stickerID===b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||this.props.stickerID===b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:!1}});e.exports=c}),null);
__d("StickerUtils",[],(function(a,b,c,d,e,f){__p&&__p();a={getScaledDimensions:function(a,b,c){var d,e,f;b>a?(f=c/b,d=a*f,e=b*f):(f=c/a,d=a*f,e=b*f);return{height:Math.round(d),width:Math.round(e)}},capitalizeWords:function(a){a=a.split(" ");for(var b=0;b<a.length;b++){var c=a[b].charAt(0).toUpperCase();a[b]=c+a[b].substr(1)}return a.join(" ")}};e.exports=a}),null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("AbstractDialogFitHeight"));g&&g.prototype;a.prototype.getHeightProperty=function(){"use strict";return"height"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("StickersStateStore",["FluxReduceStore","StickersActions","StickersConfig","StickersDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return b("immutable").Map({isAvatarStickersSelected:!1,recentStickers:[],recentStickersLoaded:!1,showFlyout:!1,storePackID:null,threadID:null,trayLoaded:!1,trayPackID:null})};a.prototype.reduce=function(a,c){__p&&__p();var d=c;c=b("StickersActions").Types;switch(d.type){case c.ADD_RECENT_STICKER:var e=[d.sticker];a.get("recentStickers").forEach(function(a){if(a.id===d.sticker.id)return;e.push(a)});return a.set("recentStickers",e.splice(0,b("StickersConfig").max_mru_stickers));case c.HIDE_FLYOUT:return a.set("showFlyout",!1);case c.LOAD_RECENT_STICKERS:return a.set("recentStickersLoaded",!0).set("recentStickers",d.stickers);case c.SELECT_AVATAR_STICKERS:return a.set("isAvatarStickersSelected",!0);case c.SELECT_STORE_PACK:return a.set("storePackID",d.packID);case c.SELECT_TRAY_PACK:return a.set("trayPackID",d.packID).set("trayLoaded",!0).set("isAvatarStickersSelected",!1);case c.SHOW_FLYOUT:return a.set("showFlyout",!0).set("threadID",d.threadID);case c.TRAY_LOADED:return a.set("trayLoaded",!0);default:return a}};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("StickersDispatcher"))}),null);
__d("StickersStoreController",["cx","Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","PureStoreBasedStateMixin","React","ReactDOM","StickersActions","StickersDispatcher","StickersStateStore","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","isSocialPlugin","requestAnimationFrame"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=688,i=320,j=null,k=b("React").createClass({displayName:"StoreLayer",mixins:[b("PureStoreBasedStateMixin")(b("StickersStateStore"))],propTypes:{isComposer:a.bool,onToggle:a.func.isRequired,shown:a.bool.isRequired},getDefaultProps:function(){return{isComposer:!1}},statics:{calculateState:function(){return{packID:b("StickersStateStore").getState().get("storePackID")}}},getInitialState:function(){return{renderStore:function(){return b("React").createElement("div",{className:"_5r5e"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}))}}},UNSAFE_componentWillMount:function(){b("StickersDispatcher").explicitlyRegisterStores([b("StickersStateStore")])},shouldComponentUpdate:function(a){return!!a.shown},componentDidMount:function(){b("Bootloader").loadModules(["StickersStore.react","react-relay/classic/container/RelayRootContainer","StickersStorePackListRoute","StickersStorePackDetailRoute"],function(a,c,d,e){this.setState({renderStore:function(){var f=this.state.packID?new e({packID:this.state.packID}):new d();return b("React").createElement(c,{Component:a,route:f,renderFetched:function(c){return b("React").createElement(a,babelHelpers["extends"]({},c,{isComposer:this.props.isComposer,packID:this.state.packID,shown:this.props.shown}))}.bind(this)})}.bind(this)})}.bind(this),"StickersStoreController")},_onToggle:function(a){b("requestAnimationFrame")(function(){return this.props.onToggle(a)}.bind(this))},render:function(){var a=b("isSocialPlugin")()&&document.body.offsetWidth<h?i:h;return b("React").createElement(b("XUIDialog.react"),{behaviors:{DialogFitHeight:b("DialogFitHeight"),LayerAutoFocus:b("LayerAutoFocus"),LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")},onToggle:this._onToggle,shown:this.props.shown,width:a},b("React").createElement(b("XUIDialogBody.react"),{className:"_5rq- autofocus"},this.state.renderStore()))}}),l=function(a){j||(j=b("DOM").create("div"),b("DOM").appendContent(document.body,j)),b("ReactDOM").render(b("React").createElement(k,{isComposer:a,onToggle:n,shown:!0}),j)},m=function(){if(!j)return;b("ReactDOM").render(b("React").createElement(k,{shown:!1,onToggle:n}),j)},n=function(a){a?l():m()};c={showStore:function(a,c){b("StickersActions").selectStorePack(a),l(!!c)}};e.exports=c}),null);
__d("PhotoProjection",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EQUIRECTANGULAR:"equirectangular",CUBESTRIP:"cubestrip",CYLINDRICAL:"cylindrical",TILED_CUBEMAP:"tiled_cubemap",PERSPECTIVE:"perspective",TRANSVERSE_CYLINDRICAL:"transverse-cylindrical"})}),null);
__d("PhotoRendererProjection",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PERSPECTIVE:"perspective",STEREOGRAPHIC:"stereographic",CYLINDRICAL:"cylindrical",EQUIRECTANGULAR:"equirectangular"})}),null);
__d("MercuryAttachmentSnippetType",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("You sent a Valentine."):g._("{name} sent a Valentine.",[g._param("name",b)])}};e.exports=a}),null);
__d("P2PSnippetStringUtils",["fbt","P2PPaymentRequestStatus","P2PTransferStatus"],(function(a,b,c,d,e,f,g){__p&&__p();a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your request for {payment request amount} from {receiver's name} was cancelled.",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}'s request for {payment request amount} was cancelled.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}'s request for {payment request amount} from {receiver's name} was cancelled.",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name} declined your request for {payment request amount}.",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("You declined {requester's name}'s request for {payment request amount}.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("You requested {amount} from {requestee name}.",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name} requested {amount} from you.",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name} requested {amount} from {requestee name}.",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,c,d,e,f,g){a=a||b("P2PPaymentRequestStatus").INITED;c=[c,d,e,f,g];switch(a){case b("P2PPaymentRequestStatus").DECLINED:return this.getRequestDeclinedSnippet.apply(this,c);case b("P2PPaymentRequestStatus").TRANSFER_FAILED:case b("P2PPaymentRequestStatus").CANCELED:return this.getRequestCanceledSnippet.apply(this,c)}return this.getRequestSentSnippet.apply(this,c)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your payment of {amount} to {receiver_name} was cancelled.",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}'s payment of {amount} was cancelled.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled.",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name} didn't accept your payment of {amount}.",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("You didn't accept {sender name}'s payment of {amount}.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name} didn't accept {sender_name}'s payment of {amount}.",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("You sent {amount} to {receiver name}.",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name} sent {amount} to you.",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name} sent {amount} to {receiver name}.",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,c,d,e,f,g){c=[c,d,e,f,g];d=a||b("P2PTransferStatus").PENDING_SENDER_INITED;switch(d){case b("P2PTransferStatus").CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,c);case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case b("P2PTransferStatus").CANCELED_EXPIRED:case b("P2PTransferStatus").CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,c)}return this.getTransferSentSnippet.apply(this,c)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants","StoryAttachmentStyle","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getAttachmentSnippetType:function(a){__p&&__p();if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){__p&&__p();switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("You sent a video."):g._("{sender name} sent a video.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("You sent a voice message."):g._("{name} sent a voice message.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("You sent a sticker."):g._("{name} sent a sticker.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("You sent a location."):g._("{sender name} sent a location.",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("You sent a live location."):g._("{sender name} sent a live location.",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){if(!b("gkx")("676919"))return c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("You sent a video."):g._("You sent a photo."):a?g._("View {sender name}'s disappearing video.",[g._param("sender name",d)]):g._("View {sender name}'s disappearing photo.",[g._param("sender name",d)])}return e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0])?b("MessengerLightweightActionUtils").getLWASnippetText(e):c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);default:return""}},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").VIDEO},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").BUSINESS_MESSAGE_ITEMS)},_hasSticker:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").STICKER},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MESSAGE_LOCATION)},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MESSAGE_LIVE_LOCATION)},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MONTAGE_DIRECT)},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").ORION)},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").ORION_REQUEST)},_hasSingleShareAttachmentOfStyle:function(a,c){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").SHARE&&a[0].share.style_list.indexOf(c)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").SHARE},_hasError:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").ERROR},_hasGift:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").GIFT},_hasFile:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").FILE},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type===b("MercuryAttachmentType").PHOTO})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a photo.");else return g._("{name} sent a photo.",[g._param("name",b)]);else if(a)return g._({"*":"You sent {num_photos} photos."},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name} sent {num_photos} photos."},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a GIF.");else return g._("{name} sent a GIF.",[g._param("name",b)]);else if(a)return g._("You sent {num_animated_images} GIFs.",[g._param("num_animated_images",c.length)]);else return g._("{name} sent {num_animated_images} GIFs.",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name} sent an attachment.",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a}),null);
__d("PhotosphereMetadata",["ImmutableRecordWithV4Types"],(function(a,b,c,d,e,f){"use strict";a=b("ImmutableRecordWithV4Types").Record;c=a({CroppedAreaImageHeightPixels:0,CroppedAreaImageWidthPixels:0,CroppedAreaLeftPixels:0,CroppedAreaTopPixels:0,FullPanoHeightPixels:0,FullPanoWidthPixels:0,InitialViewHeadingDegrees:0,InitialViewPitchDegrees:0,InitialViewRollDegrees:0,InitialViewVerticalFOVDegrees:0,PoseHeadingDegrees:0,PosePitchDegrees:0,PoseRollDegrees:0,PreProcessCropLeftPixels:0,PreProcessCropRightPixels:0,ProjectionType:"equirectangular",RendererProjectionType:"equirectangular"});e.exports={makePhotosphereMetadata:c}}),null);
__d("SphericalPhotoUtils",["PhotoRendererProjection","PhotosphereMetadata","SphericalPhotoPartialLimits"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PhotoRendererProjection").PERSPECTIVE,h=b("PhotosphereMetadata").makePhotosphereMetadata,i=b("SphericalPhotoPartialLimits").makePartialLimits,j={getMetadataFromGraphQLResult:function(a){return{CroppedAreaImageHeightPixels:a.cropped_area_image_height_pixels!=null?a.cropped_area_image_height_pixels.toString():null,CroppedAreaImageWidthPixels:a.cropped_area_image_width_pixels!=null?a.cropped_area_image_width_pixels.toString():null,CroppedAreaLeftPixels:a.cropped_area_left_pixels!=null?a.cropped_area_left_pixels.toString():null,CroppedAreaTopPixels:a.cropped_area_top_pixels!=null?a.cropped_area_top_pixels.toString():null,FullPanoHeightPixels:a.full_pano_height_pixels!=null?a.full_pano_height_pixels.toString():null,FullPanoWidthPixels:a.full_pano_width_pixels!=null?a.full_pano_width_pixels.toString():null,InitialViewHeadingDegrees:a.initial_view_heading_degrees!=null?a.initial_view_heading_degrees.toString():null,InitialViewPitchDegrees:a.initial_view_pitch_degrees!=null?a.initial_view_pitch_degrees.toString():null,InitialViewRollDegrees:a.initial_view_roll_degrees!=null?a.initial_view_roll_degrees.toString():null,InitialViewVerticalFOVDegrees:a.initial_view_vertical_fov_degrees!=null?a.initial_view_vertical_fov_degrees.toString():null,PoseHeadingDegrees:a.pose_heading_degrees!=null?a.pose_heading_degrees.toString():null,PosePitchDegrees:a.pose_pitch_degrees!=null?a.pose_pitch_degrees.toString():null,PoseRollDegrees:a.pose_roll_degrees!=null?a.pose_roll_degrees.toString():null,PreProcessCropLeftPixels:null,PreProcessCropRightPixels:null,ProjectionType:a.projection_type,RendererProjectionType:g}},calculatePartialLimits:function(a){__p&&__p();var b=a.FullPanoHeightPixels,c=a.FullPanoWidthPixels,d=a.CroppedAreaImageWidthPixels,e=a.CroppedAreaImageHeightPixels,f=a.CroppedAreaLeftPixels;a=a.CroppedAreaTopPixels;b=j.parseNumber(b);c=j.parseNumber(c);d=j.parseNumber(d);e=j.parseNumber(e);f=j.parseNumber(f);a=j.parseNumber(a);var g,h,k,l;if(d!==0&&d!==c){d=360*d/c;d<350&&(g=180*(1-2*f/c),h=d-g)}e!==0&&e!==b&&(a!==0&&(k=90*(1-2*a/b)),a+e!==b&&(l=180*(a+e-b/2)/b));f=null;c=null;d=null;a=null;k&&k<87.5&&(c=k);l&&l<87.5&&(f=l);g&&(d=g);h&&(a=h);return i({partialTopDegrees:c,partialBottomDegrees:f,partialLeftDegrees:d,partialRightDegrees:a})},parseNumber:function(a){return a?Number(a):0},getThumbnailsFromPhotoEncodings:function(a){a=a.find(function(a){return a.projection_type===g});var b=null,c=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;b=a[0]?a[0].uri:null;c=a[1]?a[1].uri:null}return{smallThumbnail:b,largeThumbnail:c}},photosphereMetadataStringToNumber:function(a){var b={};Object.keys(a).forEach(function(c){switch(c){case"ProjectionType":b.ProjectionType=a.ProjectionType;break;case"RendererProjectionType":b.RendererProjectionType=a.RendererProjectionType;break;default:b[c]=parseInt(a[c],10)}});return h(b)}};e.exports=j}),null);